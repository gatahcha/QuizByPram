(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const C="modulepreload",Q=function(o){return"/QuizByPram/"+o},y={},x=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Q(c),c in y)return;y[c]=!0;const l=c.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":C,l||(u.as="script"),u.crossOrigin="",u.href=c,a&&u.setAttribute("nonce",a),document.head.appendChild(u),l)return new Promise((p,h)=>{u.addEventListener("load",p),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};function E(o){if(!o)return{valid:!1,error:"Invalid JSON file! Please check your file format and try again."};if(!o.title||typeof o.title!="string"||o.title.trim()==="")return{valid:!1,error:"Quiz must have a non-empty title."};if(!o.description||typeof o.description!="string"||o.description.trim()==="")return{valid:!1,error:"Quiz must have a non-empty description."};if(!Array.isArray(o.questions)||o.questions.length===0)return{valid:!1,error:"Quiz must have at least one question."};for(let e=0;e<o.questions.length;e++){const t=b(o.questions[e],e);if(t)return{valid:!1,error:t}}return{valid:!0}}function b(o,e){const t=e+1;if(!o.question||typeof o.question!="string"||o.question.trim()==="")return`Question ${t} must have a non-empty question text.`;if(!Array.isArray(o.options)||o.options.length<2)return`Question ${t} must have at least 2 options.`;for(let n=0;n<o.options.length;n++)if(typeof o.options[n]!="string"||o.options[n].trim()==="")return`Question ${t} option ${n+1} must be a non-empty string.`;return typeof o.correctAnswer!="number"?`Question ${t} correctAnswer must be a number.`:o.correctAnswer<0||o.correctAnswer>=o.options.length?`Question ${t} correctAnswer index must be between 0 and ${o.options.length-1}.`:!o.explanation||typeof o.explanation!="string"||o.explanation.trim()===""?`Question ${t} must have a non-empty explanation.`:null}async function S(){const o=Object.assign({"/quizzes/fnh-200-chapter2.json":()=>x(()=>import("./fnh-200-chapter2-qKs6VuMf.js"),[]),"/quizzes/fnh-200-lesson3.json":()=>x(()=>import("./fnh-200-lesson3-CeBt8lqC.js"),[]),"/quizzes/react-fundamentals.json":()=>x(()=>import("./react-fundamentals-48hvb0c0.js"),[])}),e=[];for(const t in o)try{const n=await o[t](),s=t.split("/").pop()||"";E(n.default||n).valid&&e.push({filename:s,quiz:n.default||n})}catch(n){console.error(`Failed to load quiz from ${t}:`,n)}return e}async function N(o){return new Promise((e,t)=>{const n=new FileReader;n.onload=s=>{var r;try{const i=(r=s.target)==null?void 0:r.result,a=JSON.parse(i),c=E(a);if(!c.valid){t(new Error(c.error||"Invalid quiz file"));return}e(a)}catch{t(new Error("Invalid JSON file! Please check your file format and try again."))}},n.onerror=()=>{t(new Error("Failed to read file"))},n.readAsText(o)})}const z="quizbypram-history";function q(o){try{const e=A();e.results.push(o),e.lastAccessed=new Date,localStorage.setItem(z,JSON.stringify(e))}catch(e){console.error("Failed to save quiz result:",e)}}function A(){try{const o=localStorage.getItem(z);if(o){const e=JSON.parse(o);return{results:e.results||[],lastAccessed:new Date(e.lastAccessed||Date.now())}}}catch(o){console.error("Failed to load quiz history:",o)}return{results:[],lastAccessed:new Date}}class k{constructor(){this.state=this.getInitialState(),this.listeners=new Set}getInitialState(){return{currentView:"menu",availableQuizzes:[],currentQuiz:null,currentQuestionIndex:0,selectedAnswer:null,showExplanation:!1,userAnswers:[],score:0}}getState(){return{...this.state}}setState(e){this.state={...this.state,...e},this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}notifyListeners(){this.listeners.forEach(e=>e(this.getState()))}async loadLocalQuizzes(){try{const e=await S();this.setState({availableQuizzes:e})}catch(e){console.error("Failed to load local quizzes:",e)}}async loadQuizFromFile(e){return N(e)}startQuiz(e){this.setState({currentView:"quiz",currentQuiz:e,currentQuestionIndex:0,selectedAnswer:null,showExplanation:!1,userAnswers:[],score:0})}selectAnswer(e){this.state.showExplanation||this.setState({selectedAnswer:e})}submitAnswer(){const{currentQuiz:e,currentQuestionIndex:t,selectedAnswer:n}=this.state;if(e===null||n===null)return;const s=e.questions[t],r=n===s.correctAnswer,i={questionIndex:t,selectedAnswer:n,correctAnswer:s.correctAnswer,isCorrect:r},a=[...this.state.userAnswers,i],c=r?this.state.score+1:this.state.score;this.setState({userAnswers:a,score:c,showExplanation:!0})}nextQuestion(){const{currentQuiz:e,currentQuestionIndex:t}=this.state;if(e===null)return;const n=t+1;n>=e.questions.length?this.completeQuiz():this.setState({currentQuestionIndex:n,selectedAnswer:null,showExplanation:!1})}completeQuiz(){const{currentQuiz:e,userAnswers:t,score:n}=this.state;if(e===null)return;const s=e.questions.length,r={quizTitle:e.title,totalQuestions:s,correctAnswers:n,incorrectAnswers:s-n,percentage:Math.round(n/s*100),userAnswers:t,completedAt:new Date};q(r),this.setState({currentView:"results"})}resetQuiz(){const{currentQuiz:e}=this.state;e&&this.startQuiz(e)}backToMenu(){this.setState({currentView:"menu",currentQuiz:null,currentQuestionIndex:0,selectedAnswer:null,showExplanation:!1,userAnswers:[],score:0})}validateQuizJSON(e){return E(e)}}const L={BookOpen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>',Upload:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>',Home:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',CheckCircle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>',XCircle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>',AlertCircle:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>'};function m(o,e=""){const t=document.createElement("div");t.innerHTML=L[o];const n=t.firstElementChild;return n&&e&&n.setAttribute("class",e),n}class I{constructor(){this.element=this.createModal(),this.titleElement=this.element.querySelector(".modal-title"),this.messageElement=this.element.querySelector(".modal-message"),document.body.appendChild(this.element)}show(e,t,n="error"){this.titleElement.textContent=e,this.messageElement.textContent=t;const s=this.element.querySelector(".modal-icon");if(s){s.innerHTML="";const r=m("AlertCircle",`icon-md ${n==="error"?"text-red-500":"text-blue-500"}`);s.appendChild(r)}this.element.classList.remove("hidden"),document.body.style.overflow="hidden"}hide(){this.element.classList.add("hidden"),document.body.style.overflow=""}createModal(){const e=document.createElement("div");return e.className="modal-overlay hidden",e.innerHTML=`
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-icon"></div>
          <h3 class="modal-title"></h3>
        </div>
        <p class="modal-message"></p>
        <button class="modal-close btn btn-primary">Close</button>
      </div>
    `,e.querySelector(".modal-close").addEventListener("click",()=>this.hide()),e.addEventListener("click",n=>{n.target===e&&this.hide()}),e}}class M{constructor(e){this.manager=e,this.modal=new I}render(){const e=document.createElement("div");e.className="view-container menu-view";const t=document.createElement("div");t.className="content-wrapper";const n=this.renderHeader(),s=this.renderUploadSection(),r=this.renderQuizzesSection();return t.append(n,s,r),e.appendChild(t),e}renderHeader(){const e=document.createElement("div");e.className="menu-header";const t=m("BookOpen","icon-xl"),n=document.createElement("h1");n.className="title",n.textContent="QuizByPram";const s=document.createElement("p");return s.className="subtitle",s.textContent="Test your knowledge and improve your skills",e.append(t,n,s),e}renderUploadSection(){const e=document.createElement("div");e.className="upload-section card upload-card";const t=m("Upload","icon-lg"),n=document.createElement("p");n.className="upload-text",n.textContent="Click to upload JSON file";const s=document.createElement("p");s.className="upload-subtext",s.textContent="Must follow the required structure";const r=document.createElement("input");return r.type="file",r.accept=".json",r.className="file-input",r.addEventListener("change",i=>this.handleFileUpload(i)),e.addEventListener("click",()=>r.click()),e.append(t,n,s,r),e}renderQuizzesSection(){const e=document.createElement("div");e.className="quizzes-section";const t=document.createElement("h2");t.className="section-title",t.textContent="Available Quizzes";const n=document.createElement("div");n.className="quiz-list";const s=this.manager.getState();if(s.availableQuizzes.length===0){const r=document.createElement("p");r.className="empty-state",r.textContent="No quizzes available yet",n.appendChild(r)}else s.availableQuizzes.forEach(r=>{const i=this.renderQuizCard(r);n.appendChild(i)});return e.append(t,n),e}renderQuizCard(e){const t=document.createElement("div");t.className="card quiz-card";const n=document.createElement("h3");n.className="quiz-title",n.textContent=e.quiz.title;const s=document.createElement("p");s.className="quiz-description",s.textContent=e.quiz.description;const r=document.createElement("p");return r.className="quiz-question-count",r.textContent=`${e.quiz.questions.length} questions`,t.addEventListener("click",()=>this.handleQuizSelect(e)),t.append(n,s,r),t}async handleFileUpload(e){var s;const t=e.target,n=(s=t.files)==null?void 0:s[0];if(n){try{const r=await this.manager.loadQuizFromFile(n);this.manager.startQuiz(r)}catch(r){this.showErrorModal(r instanceof Error?r.message:"Failed to load quiz file")}t.value=""}}handleQuizSelect(e){this.manager.startQuiz(e.quiz)}showErrorModal(e){this.modal.show("Error",e,"error")}}class T{constructor(e){this.manager=e}render(){const e=document.createElement("div");e.className="view-container quiz-view";const t=document.createElement("div");t.className="content-wrapper";const n=this.renderHeader(),s=this.renderProgress(),r=this.renderQuestionSection();return t.append(n,s,r),e.appendChild(t),e}renderHeader(){var a;const e=document.createElement("div");e.className="quiz-header";const t=this.manager.getState(),n=document.createElement("h1");n.className="quiz-title-header",n.textContent=((a=t.currentQuiz)==null?void 0:a.title)||"Quiz";const s=document.createElement("button");s.className="btn btn-secondary home-button";const r=m("Home","icon-sm"),i=document.createElement("span");return i.textContent="Home",s.append(r,i),s.addEventListener("click",()=>this.manager.backToMenu()),e.append(n,s),e}renderProgress(){var u;const e=this.manager.getState(),t=e.currentQuestionIndex+1,n=((u=e.currentQuiz)==null?void 0:u.questions.length)||0,s=t/n*100,r=document.createElement("div");r.className="progress-container";const i=document.createElement("div");i.className="progress-info";const a=document.createElement("span");a.textContent=`Question ${t} of ${n}`;const c=document.createElement("span");c.textContent=`Score: ${e.score}/${e.userAnswers.length}`,i.append(a,c);const l=document.createElement("div");l.className="progress-bar";const d=document.createElement("div");return d.className="progress-fill",d.style.width=`${s}%`,l.appendChild(d),r.append(i,l),r}renderQuestionSection(){var a;const e=document.createElement("div");e.className="question-section card";const t=this.manager.getState(),n=(a=t.currentQuiz)==null?void 0:a.questions[t.currentQuestionIndex];if(!n)return e;const s=document.createElement("h2");s.className="question-text",s.textContent=n.question;const r=this.renderOptions();if(e.appendChild(s),e.appendChild(r),t.showExplanation){const c=this.renderExplanation();e.appendChild(c)}const i=this.renderActionButton();return e.appendChild(i),e}renderOptions(){var s;const e=document.createElement("div");e.className="options-container";const t=this.manager.getState(),n=(s=t.currentQuiz)==null?void 0:s.questions[t.currentQuestionIndex];return n&&n.options.forEach((r,i)=>{const a=document.createElement("button");a.className="option",a.dataset.index=i.toString();const c=document.createElement("span");if(c.textContent=r,a.appendChild(c),t.selectedAnswer===i&&!t.showExplanation&&a.classList.add("selected"),t.showExplanation)if(a.classList.add("disabled"),i===n.correctAnswer){a.classList.add("correct");const l=m("CheckCircle","icon-sm");a.appendChild(l)}else if(i===t.selectedAnswer){a.classList.add("incorrect");const l=m("XCircle","icon-sm");a.appendChild(l)}else a.style.opacity="0.5";else a.addEventListener("click",()=>this.handleAnswerSelect(i));e.appendChild(a)}),e}renderExplanation(){var i;const e=this.manager.getState(),t=(i=e.currentQuiz)==null?void 0:i.questions[e.currentQuestionIndex],n=document.createElement("div");n.className="explanation-box";const s=document.createElement("p");s.className="explanation-label",s.textContent="Explanation:";const r=document.createElement("p");return r.className="explanation-text",r.textContent=(t==null?void 0:t.explanation)||"",n.append(s,r),n}renderActionButton(){var s;const e=this.manager.getState(),t=document.createElement("button");t.className="btn btn-primary action-button";const n=e.currentQuestionIndex===(((s=e.currentQuiz)==null?void 0:s.questions.length)||0)-1;return e.showExplanation?(t.textContent=n?"View Results":"Next Question",t.addEventListener("click",()=>this.handleNext())):(t.textContent="Submit Answer",t.disabled=e.selectedAnswer===null,t.addEventListener("click",()=>this.handleSubmit())),t}handleAnswerSelect(e){this.manager.selectAnswer(e)}handleSubmit(){this.manager.submitAnswer()}handleNext(){this.manager.nextQuestion()}}class O{constructor(e){this.manager=e}render(){const e=document.createElement("div");e.className="view-container results-view";const t=document.createElement("div");t.className="content-wrapper";const n=this.renderScoreSummary(),s=this.renderQuestionReview(),r=this.renderActions();return t.append(n,s,r),e.appendChild(t),e}renderScoreSummary(){var d;const e=this.manager.getState(),t=((d=e.currentQuiz)==null?void 0:d.questions.length)||0,n=e.score,s=Math.round(n/t*100),r=document.createElement("div");r.className="score-summary card";const i=document.createElement("h1");i.className="results-title",i.textContent="Quiz Complete!";const a=document.createElement("div");a.className="score-display",a.textContent=`${n}/${t}`;const c=document.createElement("p");c.className="percentage-display",c.textContent=`You scored ${s}%`;const l=document.createElement("p");return l.className="score-message",l.textContent=this.getScoreMessage(s),r.append(i,a,c,l),r}getScoreMessage(e){return e>=90?"Excellent work!":e>=80?"Great job!":e>=70?"Good effort!":e>=60?"Not bad, keep studying!":"Keep practicing!"}renderQuestionReview(){var r;const e=document.createElement("div");e.className="question-review";const t=document.createElement("h2");t.className="review-title",t.textContent="Review",e.appendChild(t);const n=this.manager.getState(),s=((r=n.currentQuiz)==null?void 0:r.questions)||[];return n.userAnswers.forEach((i,a)=>{const c=s[i.questionIndex];if(!c)return;const l=document.createElement("div");l.className="review-card card";const d=document.createElement("div");d.className="review-card-header";const u=m(i.isCorrect?"CheckCircle":"XCircle",i.isCorrect?"icon-sm text-green-500":"icon-sm text-red-500"),p=document.createElement("h3");p.className="review-question",p.textContent=c.question,d.append(u,p);const h=document.createElement("p");if(h.className="review-correct",h.innerHTML=`<strong>Correct Answer:</strong> ${c.options[c.correctAnswer]}`,l.appendChild(d),l.appendChild(h),!i.isCorrect){const v=document.createElement("p");v.className="review-user-answer",v.innerHTML=`<strong>Your Answer:</strong> ${c.options[i.selectedAnswer]}`,l.appendChild(v)}const w=document.createElement("div");w.className="explanation-box";const f=document.createElement("p");f.className="explanation-label",f.textContent="Explanation:";const g=document.createElement("p");g.className="explanation-text",g.textContent=c.explanation,w.append(f,g),l.appendChild(w),e.appendChild(l)}),e}renderActions(){const e=document.createElement("div");e.className="results-actions";const t=document.createElement("button");t.className="btn btn-primary",t.textContent="Retry Quiz",t.addEventListener("click",()=>this.handleRetake());const n=document.createElement("button");return n.className="btn btn-secondary",n.textContent="Back to Menu",n.addEventListener("click",()=>this.handleBackToMenu()),e.append(t,n),e}handleRetake(){this.manager.resetQuiz()}handleBackToMenu(){this.manager.backToMenu()}}class B{constructor(){this.manager=new k,this.container=document.getElementById("app"),this.init()}async init(){await this.manager.loadLocalQuizzes(),this.manager.subscribe(e=>this.render(e)),this.render(this.manager.getState())}render(e){this.container.innerHTML="";let t=null;switch(e.currentView){case"menu":t=new M(this.manager);break;case"quiz":t=new T(this.manager);break;case"results":t=new O(this.manager);break}t&&this.container.appendChild(t.render())}}document.addEventListener("DOMContentLoaded",()=>{new B});
